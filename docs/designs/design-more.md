┌─────────────────────────────────────────────────────────────────┐
│                    DCOM Object (认知对象)                        │
├─────────────────────────────────────────────────────────────────┤
│  id: Uuid                  # 唯一标识                            │
│  created_at: Timestamp     # 创建时间                            │
│  updated_at: Timestamp     # 更新时间                            │
├─────────────────────────────────────────────────────────────────┤
│  ┌─────────────────────────────────────────────────────────────┐ │
│  │ Serialization (序列化层 - 物理表示)                          │ │
│  │  ├── markdown: Option<MarkdownSource>  # Markdown 表示      │ │
│  │  │     ├── path: String                                     │ │
│  │  │     ├── frontmatter: YAML                                │ │
│  │  │     └── content_hash: String                             │ │
│  │  ├── binary: Option<BinarySource>      # 二进制表示         │ │
│  │  │     └── (PDF, 图片, 音频...)                             │ │
│  │  └── virtual: Option<VirtualSource>    # 虚拟表示（规则派生）│ │
│  └─────────────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────────────┤
│  ┌─────────────────────────────────────────────────────────────┐ │
│  │ Properties (属性层 - 动态 Schema-less)                       │ │
│  │  properties: HashMap<String, Value>                          │ │
│  │  # 例如: { "type": "book", "author": "...", "isbn": "..." }  │ │
│  └─────────────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────────────┤
│  ┌─────────────────────────────────────────────────────────────┐ │
│  │ Derived (推演层 - Datalog 规则计算)                          │ │
│  │  inferred_type: String     # 根据规则推演的类型              │ │
│  │  equivalence_classes: []   # 所属等价类                      │ │
│  │  cognitive_weight: f64     # 认知权重（入边数、引用频率）    │ │
│  └─────────────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────────────┤
│  ┌─────────────────────────────────────────────────────────────┐ │
│  │ Embeddings (语义层)                                          │ │
│  │  vector: Option<Vec<f32>>  # 语义向量                        │ │
│  │  chunks: Vec<Chunk>        # 分块嵌入（用于 RAG）            │ │
│  └─────────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────┐
│                   DCOM Core                      │
│  CognitiveObject, PropertyValue, Serialization  │
│              (纯抽象，无 IO)                     │
└─────────────────────────────────────────────────┘
                       ↑
           ┌───────────┴───────────┐
           │   Adapter Trait       │
           │ (适配器接口规范)       │
           └───────────────────────┘
                       ↑
     ┌─────────────────┼─────────────────┐
     │                 │                 │
┌────┴────┐      ┌─────┴─────┐     ┌─────┴─────┐
│ Obsidian │      │  PDF      │     │  Image    │
│ Adapter  │      │  Adapter  │     │  Adapter  │
└──────────┘      └───────────┘     └───────────┘
     │
     ├── frontmatter 解析规则
     ├── wikilink 语法处理  
     ├── block reference 提取
     └── tag/alias 约定