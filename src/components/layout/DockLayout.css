/**
 * @fileoverview Dockview 标签页布局样式
 *
 * dockview-core 标签页布局系统的自定义主题样式。
 * 实现 VS Code 风格的暗色/亮色主题和拖放视觉反馈。
 *
 * @module components/layout/DockLayout/styles
 *
 * @sections
 * - 容器布局：Dockview 根容器
 * - 主题变量：Abyss 暗色主题 CSS 变量
 * - 组高亮：活动组边框样式
 * - 面板样式：SolidJS 面板内容区域
 * - 标签样式：自定义标签头部
 * - 亮色主题：Light 模式覆盖
 * - 侧边栏样式：隐藏标签头的面板
 * - 资源管理器样式：侧边栏面板布局
 */

/* ==========================================================================
   容器布局
   ========================================================================== */

/* Dockview 根容器 - 填充父容器 */
.dockview-container {
    width: 100%;
    height: 100%;
    overflow: visible;
    /* 允许拖放 overlay 显示 */
    position: relative;
}

/* ==========================================================================
   Abyss 暗色主题变量
   ========================================================================== */

/* 暗色主题 CSS 变量定义 */
.dockview-container.dockview-theme-abyss {
    /* 背景色 */
    --dv-background-color: var(--bg-primary, var(--bg-primary));
    --dv-paneview-header-border-color: var(--border-color, var(--border-color));
    --dv-tabs-and-actions-container-background-color: var(--bg-secondary, var(--bg-secondary));

    /* 活动组标签背景 */
    --dv-activegroup-visiblepanel-tab-background-color: var(--bg-tertiary, var(--bg-tertiary));
    --dv-activegroup-hiddenpanel-tab-background-color: var(--bg-secondary, var(--bg-secondary));

    /* 非活动组标签背景 */
    --dv-inactivegroup-visiblepanel-tab-background-color: var(--bg-tertiary, var(--bg-tertiary));
    --dv-inactivegroup-hiddenpanel-tab-background-color: var(--bg-secondary, var(--bg-secondary));

    /* 标签分隔线 */
    --dv-tab-divider-color: var(--border-color, var(--border-color));

    /* 活动组标签文字 */
    --dv-activegroup-visiblepanel-tab-color: var(--text-primary, var(--text-primary));
    --dv-activegroup-hiddenpanel-tab-color: var(--text-secondary, #9a9a9a);

    /* 非活动组标签文字 */
    --dv-inactivegroup-visiblepanel-tab-color: var(--text-primary, var(--text-primary));
    --dv-inactivegroup-hiddenpanel-tab-color: var(--text-secondary, #9a9a9a);

    /* 分隔线和组视图背景 */
    --dv-separator-border: var(--border-color, var(--border-color));
    --dv-group-view-background-color: var(--bg-primary, var(--bg-primary));

    /* 拖放叠加层 - 重要：必须可见以支持拖放功能 */
    --dv-drag-over-background-color: rgba(14, 99, 156, 0.3);
    --dv-drag-over-border-color: var(--accent-color, #0e639c);
    --dv-drag-over-border: 2px solid var(--accent-color, #0e639c);
    --dv-activegroup-focus-border-color: var(--accent-color, #0e639c);

    /* 
     * Sash（拖拽调整大小手柄）样式
     * 使组之间可以通过拖拽来调整大小
     */
    --dv-sash-color: transparent;
    --dv-active-sash-color: var(--accent-color, #0e639c);
    --dv-active-sash-transition-duration: 0.1s;
    --dv-active-sash-transition-delay: 0.15s;
}

/* ==========================================================================
   组高亮样式
   ========================================================================== */

/* 活动组边框高亮 */
.dockview-container .groupview.active-group {
    outline: 1px solid var(--accent-color, #0e639c);
    outline-offset: -1px;
}

/* 非活动组边框（透明） */
.dockview-container .groupview:not(.active-group) {
    outline: 1px solid transparent;
    outline-offset: -1px;
    transition: outline-color 0.15s ease;
    /* 平滑过渡 */
}

/* 悬停时显示边框 */
.dockview-container .groupview:hover:not(.active-group) {
    outline-color: var(--border-color, var(--border-color));
}

/* ==========================================================================
   SolidJS 面板样式
   ========================================================================== */

/* 面板内容区域 */
.dockview-solid-panel {
    background-color: var(--bg-primary, var(--bg-primary));
    color: var(--text-primary, var(--text-primary));
}

/* ==========================================================================
   自定义标签样式
   ========================================================================== */

/* 标签容器 */
.dockview-solid-tab {
    display: flex;
    align-items: center;
    gap: 6px;
    /* 图标和标题间距 */
    padding: 0 8px;
    height: 100%;
    font-size: 13px;
    white-space: nowrap;
}

/* 标签图标 */
.dockview-solid-tab .tab-icon {
    font-size: 14px;
}

/* 标签标题 - 溢出省略 */
.dockview-solid-tab .tab-title {
    overflow: hidden;
    text-overflow: ellipsis;
}

/* ==========================================================================
   亮色主题覆盖
   ========================================================================== */

/* 亮色主题 CSS 变量覆盖 */
[data-theme="light"] .dockview-container.dockview-theme-abyss {
    --dv-background-color: var(--bg-primary, #ffffff);
    --dv-paneview-header-border-color: var(--border-color, var(--text-primary));
    --dv-tabs-and-actions-container-background-color: var(--bg-secondary, #f3f3f3);
    --dv-activegroup-visiblepanel-tab-background-color: var(--bg-tertiary, #e4e4e4);
    --dv-activegroup-hiddenpanel-tab-background-color: var(--bg-secondary, #f3f3f3);
    --dv-inactivegroup-visiblepanel-tab-background-color: var(--bg-tertiary, #e4e4e4);
    --dv-inactivegroup-hiddenpanel-tab-background-color: var(--bg-secondary, #f3f3f3);
    --dv-tab-divider-color: var(--border-color, var(--text-primary));
    --dv-activegroup-visiblepanel-tab-color: var(--text-primary, var(--bg-primary));
    --dv-activegroup-hiddenpanel-tab-color: var(--text-secondary, #6a6a6a);
    --dv-inactivegroup-visiblepanel-tab-color: var(--text-primary, var(--bg-primary));
    --dv-inactivegroup-hiddenpanel-tab-color: var(--text-secondary, #6a6a6a);
    --dv-separator-border: var(--border-color, var(--text-primary));
    --dv-group-view-background-color: var(--bg-primary, #ffffff);

    /* 
     * Sash（拖拽调整大小手柄）样式 - 亮色主题
     */
    --dv-sash-color: transparent;
    --dv-active-sash-color: var(--accent-color, #0078d4);
}

/* ==========================================================================
   Sash 拖拽手柄样式
   
   Sash 是 dockview 用于调整组之间大小的拖拽手柄。
   默认情况下是透明的，悬停/拖拽时显示高亮色。
   ========================================================================== */

/* 
 * 增加 sash 的可交互区域
 * 虽然视觉上是细线，但实际可点击区域更大以便于操作
 */
.dockview-container .dv-sash-container .dv-sash {
    z-index: 99;
}

/* 水平方向 sash（用于左右调整） */
.dockview-container .dv-horizontal>.dv-sash-container>.dv-sash {
    /* 默认显示一条细的分隔线 */
    background-color: var(--border-color, rgba(128, 128, 128, 0.2));
    transition: background-color 0.15s ease;
}

/* 垂直方向 sash（用于上下调整） */
.dockview-container .dv-vertical>.dv-sash-container>.dv-sash {
    /* 默认显示一条细的分隔线 */
    background-color: var(--border-color, rgba(128, 128, 128, 0.2));
    transition: background-color 0.15s ease;
}

/* 悬停和拖拽时显示高亮色 */
.dockview-container .dv-sash-container .dv-sash:not(.disabled):hover,
.dockview-container .dv-sash-container .dv-sash:not(.disabled):active {
    background-color: var(--accent-color, #0e639c) !important;
    transition-delay: 0s;
}

/* ==========================================================================
   侧边栏样式面板（隐藏标签头）
   ========================================================================== */

/* 隐藏侧边栏组的标签栏 */
.dockview-container .groupview.sidebar-group .tabs-and-actions-container {
    display: none;
}

/* ==========================================================================
   资源管理器/侧边栏面板样式
   ========================================================================== */

/* 资源管理器面板容器 */
.explorer-panel,
.sidebar-panel {
    display: flex;
    flex-direction: column;
    height: 100%;
    background: var(--bg-secondary, var(--bg-secondary));
    overflow: hidden;
}

/* 侧边栏头部 */
.sidebar-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    height: 35px;
    padding: 0 16px;
    flex-shrink: 0;
    /* 防止压缩 */
    border-bottom: 1px solid var(--border-color, var(--border-color));
}

/* 侧边栏标题 */
.sidebar-title {
    font-size: 11px;
    font-weight: 600;
    letter-spacing: 0.5px;
    color: var(--text-secondary, #9a9a9a);
    text-transform: uppercase;
    /* 大写风格 */
}

/* 侧边栏内容区域 */
.sidebar-content {
    flex: 1;
    overflow-y: auto;
    overflow-x: hidden;
}